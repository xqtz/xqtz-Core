setclipboard("https://discord.gg/QZwnfkKS8Y")

--loading speed

game.StarterGui:SetCore("SendNotification", {
   Title = "Script",
   Text = "Loading script...",
   Icon = "",
   Duration = 5
})

wait(1)

local start = os.clock()

-- gui

local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
local Window = Library.CreateLib("xqtz Core", "BloodTheme")

--info

local info = Window:NewTab("Arms of Conquest")
local info = info:NewSection("made with love, xqtz")

info:NewLabel("join discord to make suggestions what to add")
info:NewLabel("mobile/xbox doesn't get a custom musket")

--no bullet drop
 
local Main = Window:NewTab("gun modding")
local MainSection = Main:NewSection("modding la musket and pistol")
 
MainSection:NewButton("No Bullet Drop", "Auto-detect weapon", function()
    local Players = game:GetService("Players")
    local StarterGui = game:GetService("StarterGui")
    local player = Players.LocalPlayer

    local supportedWeapons = {
        "1766 Charleville Musket",
        "Land Pattern Pistol"
    }

    local function notify(title, text)
        pcall(function()
            StarterGui:SetCore("SendNotification", {
                Title = title,
                Text = text,
                Duration = 4
            })
        end)
    end

    -- Find weapon in backpack
    local tool
    for _, name in ipairs(supportedWeapons) do
        tool = player.Backpack:FindFirstChild(name)
        if tool then break end
    end

    if not tool then
        notify(
            "Error: Weapon Not Found",
            "No supported firearm detected in your backpack."
        )
        return
    end

    --find value
    local settings = tool:FindFirstChild("Settings")
    local misc = settings and settings:FindFirstChild("Miscellaneous")
    local bulletDrop = misc and misc:FindFirstChild("BulletDropPerFrame")

    if not bulletDrop then
        notify(
            "Error: Setting Missing",
            "Bullet drop configuration was not found."
        )
        return
    end

    --change the drop
    bulletDrop.Value = 0

    --notify for a person that wanted this
    if bulletDrop.Value == 0 then
        notify(
            "Success",
            "Bullet drop disabled for " .. tool.Name .. " xqtz was here "
        )
    else
        notify(
            "Error: Change Failed",
            "The bullet drop value could not be applied."
        )
    end
end)

MainSection:NewButton("Fast Reload", "Auto-detect weapon", function()
    local Players = game:GetService("Players")
    local StarterGui = game:GetService("StarterGui")
    local player = Players.LocalPlayer

    local supportedWeapons = {
        "1766 Charleville Musket",
        "Land Pattern Pistol"
    }

    local function notify(title, text)
        pcall(function()
            StarterGui:SetCore("SendNotification", {
                Title = title,
                Text = text,
                Duration = 4
            })
        end)
    end

    -- Find weapon in backpack
    local tool
    for _, name in ipairs(supportedWeapons) do
        tool = player.Backpack:FindFirstChild(name)
        if tool then break end
    end

    if not tool then
        notify(
            "Error: Weapon Not Found",
            "No supported firearm detected in your backpack."
        )
        return
    end

    --finding the thing
    local settings = tool:FindFirstChild("Settings")
    local misc = settings and settings:FindFirstChild("Miscellaneous")
    local reloadSpeed = misc and misc:FindFirstChild("ReloadSpeed")

    if not reloadSpeed then
        notify(
            "Error: Setting Missing",
            "Reload speed configuration was not found."
        )
        return
    end

    --changing the val
    reloadSpeed.Value = 0.1

    --noti for error or not
    if reloadSpeed.Value == 0.1 then
        notify(
            "Success",
            "Reload speed set to 0.1 for " .. tool.Name .. "  xqtz was here "
        )
    else
        notify(
            "Error: Change Failed",
            "The reload speed value could not be applied."
        )
    end
end)

-- hitbox
-- ap = apply
-- func = function
-- up = update

local hitboxTab = Window:NewTab("Hitbox")
local hitboxSection = hitboxTab:NewSection("HBE")

-- default settings
local hitboxSize = Vector3.new(15, 15, 15)
local hitboxColor = Color3.fromRGB(255, 0, 0)
local hbeEnabled = false
local notifiedPlayers = {}

-- input for the size
hitboxSection:NewTextBox("Hitbox Size (X,Y,Z)", "Type like 15,15,15", function(text)
    local x, y, z = text:match("(%d+),(%d+),(%d+)")
    if x and y and z then
        hitboxSize = Vector3.new(tonumber(x), tonumber(y), tonumber(z))
        -- update hitboxes immediately if toggle is on
        if hbeEnabled then
            for _, p in ipairs(Players:GetPlayers()) do
                if p ~= LocalPlayer then
                    local root = p.Character and p.Character:FindFirstChild("HumanoidRootPart")
                    if root and (not LocalPlayer.Team or p.Team ~= LocalPlayer.Team) then
                        root.Size = hitboxSize
                    end
                end
            end
        end
    end
end)

-- toggle it
hitboxSection:NewToggle("Enable Hitbox", "Apply hitboxes to enemies", function(state)
    hbeEnabled = state
    -- reset notifications so we can notify again
    if not state then
        notifiedPlayers = {}
        -- revert hitboxes to original values
        for _, p in ipairs(Players:GetPlayers()) do
            local root = p.Character and p.Character:FindFirstChild("HumanoidRootPart")
            if root then
                root.Size = Vector3.new(2,2,1) -- default Roblox size
                root.Color = Color3.fromRGB(255,255,255)
                root.Transparency = 0
                root.CanCollide = true
            end
        end
    else
        -- immediately apply to all existing enemies
        for _, p in ipairs(Players:GetPlayers()) do
            if p ~= LocalPlayer and (not LocalPlayer.Team or p.Team ~= LocalPlayer.Team) then
                local root = p.Character and p.Character:FindFirstChild("HumanoidRootPart")
                if root then
                    root.Size = hitboxSize
                    root.Color = hitboxColor
                    root.Transparency = 0.5
                    root.CanCollide = false
                end
            end
        end
    end
end)

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local StarterGui = game:GetService("StarterGui")

-- notification helper
local function notify(title, msg)
    pcall(function()
        StarterGui:SetCore("SendNotification", {
            Title = title,
            Text = msg,
            Duration = 4
        })
    end)
end

-- function to handle new players or respawns
local function handlePlayer(player)
    player.CharacterAdded:Connect(function(char)
        local root = char:WaitForChild("HumanoidRootPart", 5)
        if not root then
            notify("Error", "HumanoidRootPart not found for "..player.Name)
            return
        end

        RunService.RenderStepped:Connect(function()
            if hbeEnabled then
                -- only enemies
                if not LocalPlayer.Team or player.Team ~= LocalPlayer.Team then
                    root.Size = hitboxSize
                    root.Color = hitboxColor
                    root.Transparency = 0.5
                    root.CanCollide = false
                    if not notifiedPlayers[player] then
                        notify("Success", "Hitbox applied to "..player.Name)
                        notifiedPlayers[player] = true
                    end
                end
            else
                -- revert when toggle off
                root.Size = Vector3.new(2,2,1)
                root.Color = Color3.fromRGB(255,255,255)
                root.Transparency = 0
                root.CanCollide = true
            end
        end)
    end)
end

-- apply to existing players
for _, p in ipairs(Players:GetPlayers()) do
    if p ~= LocalPlayer then
        handlePlayer(p)
    end
end

-- apply to new players
Players.PlayerAdded:Connect(function(player)
    if player ~= LocalPlayer then
        handlePlayer(player)
    end
end)


-- morale mod
local moraleTab = Window:NewTab("Morale Modding")
local moraleSection = moraleTab:NewSection("Infinite Morale")

moraleSection:NewButton("Enable Infinite Morale", "Prevents morale loss", function()
    local ReplicatedStorage = game:GetService("ReplicatedStorage")
    local StarterGui = game:GetService("StarterGui")

    -- notification helper
    local function notify(title, text)
        pcall(function()
            StarterGui:SetCore("SendNotification", {
                Title = title,
                Text = text,
                Duration = 4
            })
        end)
    end

    -- wait for GameInfo
    local GameInfo = ReplicatedStorage:WaitForChild("GameInfo", 5)
    if not GameInfo then
        notify("Error", "GameInfo not found in ReplicatedStorage")
        return
    end

    -- wait for ServerInfo
    local ServerInfo = GameInfo:WaitForChild("ServerInfo", 5)
    if not ServerInfo then
        notify("Error", "ServerInfo not found in GameInfo")
        return
    end

    -- wait for MoraleLossMinFlagDist
    local MoraleLoss = ServerInfo:WaitForChild("MoraleLossMinFlagDist", 5)
    if not MoraleLoss then
        notify("Error", "MoraleLossMinFlagDist not found in ServerInfo")
        return
    end

    -- check current value
    if MoraleLoss.Value >= 1000000 then
        notify("Notice", "Morale is already maxed ‚úÖ")
        return
    end

    -- set max morale
    MoraleLoss.Value = 1000000

    if MoraleLoss.Value == 1000000 then
        notify("Success", "Infinite morale enabled! xqtz was here üéØ")
    else
        notify("Error", "Failed to modify morale value ‚ùå")
    end
end)




-- setting
local SettingsTab = Window:NewTab("Settings")
local SettingsSection = SettingsTab:NewSection("Custom Settings")

SettingsSection:NewKeybind(
    "Toggle GUI",                           
    "open/close", 
    Enum.KeyCode.Minus,                     
    function()
        Library:ToggleUI() 
    end
)

--cred

local Credits = Window:NewTab("Credits")
local Credits = Credits:NewSection("creds")
 
Credits:NewLabel("Owner jr_xqtz")
Credits:NewLabel("tester 4fa")
Credits:NewLabel("https://discord.gg/QZwnfkKS8Y")

--fin

local finish = os.clock()

local time = finish - start
local rating
if time < 3 then
   rating = "fast"
elseif time < 5 then
   rating = "acceptable"
else
   rating = "slow"
end

game.StarterGui:SetCore("SendNotification", {
   Title = "Script",
   Text = string.format("Script loaded in %.2f seconds (%s loading)", time, rating),
   Icon = "",
   Duration = 5
})
